#!/usr/bin/env bash

# misc convenient shortcuts

Src=$(cd $( dirname "${BASH_SOURCE[0]}" ) && pwd )/..
chmod +x $Src/etc/sh

alias ls="ls -G"
alias gp="git add *; git commit -am saving; git push; git status"
alias axe="lua axe.lua"
alias oks="(date; cd $Src/tests;                         lua tests.lua)"
alias okspy="(rerun '$Src/etc/sh -t')"

docs() {
  mkdir -p $Src/docs
  (cd $Src/src; pycco -d $Src/docs *.lua)
  (cd $Src; markdown README.md > $Src/docs/index.html)
  cp $Src/etc/pycco.css $Src/docs
}


art() { cat<<'EOF'
     oO)-.                       .-(Oo
    /__  _\                     /_  __\
    \  \(  |     ()~()         |  )/  /
     \__|\ |    (-___-)        | /|__/
     '  '--'    ==`-'==        '--'  '

        .--.
       |o_o |
       |:_/ |
      //   \ \
     (|     | )
    /'\_   _/`\
    \___)=(___/

                                  .::!!!!!!!:.
    .!!!!!:.                        .:!!!!!!!!!!!!
    ~~~~!!!!!!.                 .:!!!!!!!!!UWWW$$$
        :$$NWX!!:           .:!!!!!!XUWW$$$$$$$$$P
        $$$$$##WX!:      .<!!!!UW$$$$"  $$$$$$$$#
        $$$$$  $$$UX   :!!UW$$$$$$$$$   4$$$$$*
        ^$$$B  $$$$\     $$$$$$$$$$$$   d$$R"
          "*$bd$$$$      '*$$$$$$$$$$$o+#"
               """"          """""""

            /'._     _,
            \   ;__.'  }
        (`-._;-" _.--.}'
        /_'    /`    _}     _.--"""-.
          `.   \_._.;     .'         \
            '-.__ /      /            |
    jgs      _/  `\      \            /
            ^`   ^`       '._       .'
                             `"""""``

         _.---._..-""""""-.
      .-" o   -.           `.
      `._     -'             \
        _`";`                 |  
       '-'__\  \     _.-'     /__
         '-'---'--'``\__, _.-'--""-.
    jgs               (.-'        ,-`

         ,____________,
         .'          '.
        /~~~~^~~~^~^~~~\
       /      _    /||  \
      ;      ( }   \||D  ;
      |    | /\__,=[_]   |
      ;  ( |_\_  |---|   ;
       \  )|  |/ |   |  /
    jgs '. |  /_ |   |.'
         '------------'

             '\                   .  . 
               \              .         ' .
              O>>         .                 'o
               \       . 
               /\    .  
              / /  .'                           
    ^^^^^jgs^^^^^^^`^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

      __
       /
    .-/-.
    |'-'|
    |   |
    |   |   .-""""-.
    \___/  /' .  '. \   \|/\//
          (`-..:...-')  |`""`|
           ;-......-;   |    |
      jgs   '------'    \____/

                                     .
        .              .   .'.     \   /
      \   /      .'. .' '.'   '  -=  o  =-
    -=  o  =-  .'   '              /   \
      /   \                          '
        '

                          *       +
      *     '                  |
        ()    .-.,-"``"-.    - o -
              '=/_       \     |
           *   |::'=._    ;      '
      '         \::.  `=./`,   '
        +    .   '-::..-'``'    *
    jgs   O    *     .       +  .
             *     .       +

              ___
             /`  _\    
             |  / 0|--.  
        -   / \_|0`/ \.`'._/)
    - ~ -^_| /-_~ ^- ~_` - -~_
    -  ~  -| |   - ~ -  ~  -
    jgs     \ \, ~   -   ~  
             \_|

     , ; ,   .-'"""'-.   , ; ,
     \\|/  .'         '.  \|//
      \-;-/  ()     ()  \-;-/
      // ;               ; \\
     //__; :.         .; ;__\\
    `-----\'.'-.....-'.'/-----'
           '.'.-.-,_.'.'
    jgs      '(  (..-'
               '-'

                   _ _       \ \
        .-"""""-. / \_> /\    |/
       /         \.'`  `',.--//
     -(          I       I  @@\
       \         /'.____.'\___|
        '-.....-' __/ | \   (`)
    jgs          /   /  /
                     \  \

          _____
         /     \______
        |  .-""-.     |
        | /      \    |
        | \      /    |
        |  '-..-;\    |
    jgs |________\\___|
                  \|
EOF
}

if [ "$1" == "-t" ]; then
  tput bold; tput setaf 6
  date +"%r"
  art | gawk '
   BEGIN {srand('$RANDOM'); RS="";FS=""}
         {N[rand()] = $0}
   END   {for(i in N) { print "\n"N[i]; break}}'
  tput sgr0
  cd $Src/tests
  lua tests.lua
fi

